const _0x5f2066=_0x517a;(function(_0x30ffa0,_0x286ce6){const _0x2642d9=_0x517a,_0x422d1f=_0x30ffa0();while(!![]){try{const _0x37b684=-parseInt(_0x2642d9(0x89))/0x1+-parseInt(_0x2642d9(0x93))/0x2*(-parseInt(_0x2642d9(0x80))/0x3)+parseInt(_0x2642d9(0x90))/0x4+parseInt(_0x2642d9(0x78))/0x5+parseInt(_0x2642d9(0x95))/0x6+parseInt(_0x2642d9(0x77))/0x7*(parseInt(_0x2642d9(0x8d))/0x8)+-parseInt(_0x2642d9(0x6d))/0x9*(parseInt(_0x2642d9(0x9d))/0xa);if(_0x37b684===_0x286ce6)break;else _0x422d1f['push'](_0x422d1f['shift']());}catch(_0x1f7df3){_0x422d1f['push'](_0x422d1f['shift']());}}}(_0x1bef,0xcd71d));const fs=require('fs'),{tmpdir}=require('os'),Crypto=require(_0x5f2066(0x99)),ff=require(_0x5f2066(0x6c)),webp=require(_0x5f2066(0x9e)),path=require(_0x5f2066(0x7c));async function imageToWebp(_0x46d71a){const _0x1b1ee3=_0x5f2066,_0x318b1b=path[_0x1b1ee3(0x7e)](tmpdir(),Crypto[_0x1b1ee3(0x97)](0x6)[_0x1b1ee3(0x8b)](0x0,0x6)['toString'](0x24)+_0x1b1ee3(0x83)),_0x1e41ba=path[_0x1b1ee3(0x7e)](tmpdir(),Crypto[_0x1b1ee3(0x97)](0x6)[_0x1b1ee3(0x8b)](0x0,0x6)[_0x1b1ee3(0x9b)](0x24)+'.jpg');fs['writeFileSync'](_0x1e41ba,_0x46d71a),await new Promise((_0x1c6831,_0x2645cc)=>{const _0x9b2acd=_0x1b1ee3;ff(_0x1e41ba)['on']('error',_0x2645cc)['on'](_0x9b2acd(0x98),()=>_0x1c6831(!![]))[_0x9b2acd(0x7d)]([_0x9b2acd(0x9a),_0x9b2acd(0x74),'-vf',_0x9b2acd(0x7b)])[_0x9b2acd(0x8e)](_0x9b2acd(0x6f))[_0x9b2acd(0x92)](_0x318b1b);});const _0x4b997b=fs[_0x1b1ee3(0x91)](_0x318b1b);return fs[_0x1b1ee3(0x81)](_0x318b1b),fs[_0x1b1ee3(0x81)](_0x1e41ba),_0x4b997b;}async function videoToWebp(_0x4f4bb8){const _0xdcdbbc=_0x5f2066,_0x3fe707=path[_0xdcdbbc(0x7e)](tmpdir(),Crypto['randomBytes'](0x6)[_0xdcdbbc(0x8b)](0x0,0x6)[_0xdcdbbc(0x9b)](0x24)+_0xdcdbbc(0x83)),_0x4d3a7e=path['join'](tmpdir(),Crypto[_0xdcdbbc(0x97)](0x6)['readUIntLE'](0x0,0x6)[_0xdcdbbc(0x9b)](0x24)+'.mp4');fs[_0xdcdbbc(0x72)](_0x4d3a7e,_0x4f4bb8),await new Promise((_0x233f28,_0x45a13a)=>{const _0xcece32=_0xdcdbbc;ff(_0x4d3a7e)['on']('error',_0x45a13a)['on'](_0xcece32(0x98),()=>_0x233f28(!![]))['addOutputOptions'](['-vcodec',_0xcece32(0x74),_0xcece32(0x85),'scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse',_0xcece32(0x8c),'0','-ss',_0xcece32(0x96),'-t',_0xcece32(0x9f),_0xcece32(0x84),_0xcece32(0x7f),_0xcece32(0x71),_0xcece32(0x82),'0'])[_0xcece32(0x8e)](_0xcece32(0x6f))[_0xcece32(0x92)](_0x3fe707);});const _0x58f086=fs['readFileSync'](_0x3fe707);return fs[_0xdcdbbc(0x81)](_0x3fe707),fs[_0xdcdbbc(0x81)](_0x4d3a7e),_0x58f086;}async function writeExifImg(_0x5ab982,_0x349d74){const _0x5d245e=_0x5f2066;let _0x348c18=await imageToWebp(_0x5ab982);const _0x12985d=path['join'](tmpdir(),Crypto[_0x5d245e(0x97)](0x6)[_0x5d245e(0x8b)](0x0,0x6)[_0x5d245e(0x9b)](0x24)+_0x5d245e(0x83)),_0x47d11d=path['join'](tmpdir(),Crypto[_0x5d245e(0x97)](0x6)[_0x5d245e(0x8b)](0x0,0x6)[_0x5d245e(0x9b)](0x24)+_0x5d245e(0x83));fs[_0x5d245e(0x72)](_0x12985d,_0x348c18);if(_0x349d74[_0x5d245e(0x88)]||_0x349d74['author']){const _0x416924=new webp[(_0x5d245e(0x73))](),_0x1508a4={'sticker-pack-id':_0x5d245e(0x79),'sticker-pack-name':_0x349d74[_0x5d245e(0x88)],'sticker-pack-publisher':_0x349d74[_0x5d245e(0x6e)],'emojis':_0x349d74[_0x5d245e(0x87)]?_0x349d74[_0x5d245e(0x87)]:['']},_0x4e5dbc=Buffer[_0x5d245e(0x7a)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x478074=Buffer[_0x5d245e(0x7a)](JSON[_0x5d245e(0x76)](_0x1508a4),_0x5d245e(0x8a)),_0x1949da=Buffer[_0x5d245e(0x75)]([_0x4e5dbc,_0x478074]);return _0x1949da[_0x5d245e(0x86)](_0x478074[_0x5d245e(0x70)],0xe,0x4),await _0x416924['load'](_0x12985d),fs[_0x5d245e(0x81)](_0x12985d),_0x416924[_0x5d245e(0x6b)]=_0x1949da,await _0x416924[_0x5d245e(0x92)](_0x47d11d),_0x47d11d;}}async function writeExifVid(_0x14ed27,_0x544459){const _0x2ff54d=_0x5f2066;let _0x3c5a6b=await videoToWebp(_0x14ed27);const _0x3f995c=path[_0x2ff54d(0x7e)](tmpdir(),Crypto[_0x2ff54d(0x97)](0x6)[_0x2ff54d(0x8b)](0x0,0x6)[_0x2ff54d(0x9b)](0x24)+_0x2ff54d(0x83)),_0x42bbc9=path[_0x2ff54d(0x7e)](tmpdir(),Crypto[_0x2ff54d(0x97)](0x6)[_0x2ff54d(0x8b)](0x0,0x6)['toString'](0x24)+'.webp');fs[_0x2ff54d(0x72)](_0x3f995c,_0x3c5a6b);if(_0x544459[_0x2ff54d(0x88)]||_0x544459[_0x2ff54d(0x6e)]){const _0x2a6983=new webp[(_0x2ff54d(0x73))](),_0x2079cd={'sticker-pack-id':_0x2ff54d(0x79),'sticker-pack-name':_0x544459[_0x2ff54d(0x88)],'sticker-pack-publisher':_0x544459[_0x2ff54d(0x6e)],'emojis':_0x544459[_0x2ff54d(0x87)]?_0x544459[_0x2ff54d(0x87)]:['']},_0x122c94=Buffer[_0x2ff54d(0x7a)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x1a5761=Buffer[_0x2ff54d(0x7a)](JSON['stringify'](_0x2079cd),_0x2ff54d(0x8a)),_0x10298b=Buffer[_0x2ff54d(0x75)]([_0x122c94,_0x1a5761]);return _0x10298b[_0x2ff54d(0x86)](_0x1a5761[_0x2ff54d(0x70)],0xe,0x4),await _0x2a6983[_0x2ff54d(0x8f)](_0x3f995c),fs[_0x2ff54d(0x81)](_0x3f995c),_0x2a6983['exif']=_0x10298b,await _0x2a6983[_0x2ff54d(0x92)](_0x42bbc9),_0x42bbc9;}}async function writeExif(_0x4020d8,_0x3b292b){const _0x43bf7a=_0x5f2066;let _0x34ed61=/webp/[_0x43bf7a(0x9c)](_0x4020d8[_0x43bf7a(0xa0)])?_0x4020d8[_0x43bf7a(0x94)]:/image/['test'](_0x4020d8['mimetype'])?await imageToWebp(_0x4020d8[_0x43bf7a(0x94)]):/video/[_0x43bf7a(0x9c)](_0x4020d8[_0x43bf7a(0xa0)])?await videoToWebp(_0x4020d8[_0x43bf7a(0x94)]):'';const _0xd2dd64=path[_0x43bf7a(0x7e)](tmpdir(),Crypto[_0x43bf7a(0x97)](0x6)[_0x43bf7a(0x8b)](0x0,0x6)['toString'](0x24)+_0x43bf7a(0x83)),_0x1fb63f=path['join'](tmpdir(),Crypto[_0x43bf7a(0x97)](0x6)[_0x43bf7a(0x8b)](0x0,0x6)[_0x43bf7a(0x9b)](0x24)+_0x43bf7a(0x83));fs[_0x43bf7a(0x72)](_0xd2dd64,_0x34ed61);if(_0x3b292b[_0x43bf7a(0x88)]||_0x3b292b[_0x43bf7a(0x6e)]){const _0x69d298=new webp[(_0x43bf7a(0x73))](),_0x5de474={'sticker-pack-id':_0x43bf7a(0x79),'sticker-pack-name':_0x3b292b[_0x43bf7a(0x88)],'sticker-pack-publisher':_0x3b292b[_0x43bf7a(0x6e)],'emojis':_0x3b292b[_0x43bf7a(0x87)]?_0x3b292b[_0x43bf7a(0x87)]:['']},_0x5c787e=Buffer[_0x43bf7a(0x7a)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0xabf418=Buffer['from'](JSON['stringify'](_0x5de474),_0x43bf7a(0x8a)),_0x17018e=Buffer[_0x43bf7a(0x75)]([_0x5c787e,_0xabf418]);return _0x17018e['writeUIntLE'](_0xabf418[_0x43bf7a(0x70)],0xe,0x4),await _0x69d298[_0x43bf7a(0x8f)](_0xd2dd64),fs['unlinkSync'](_0xd2dd64),_0x69d298[_0x43bf7a(0x6b)]=_0x17018e,await _0x69d298[_0x43bf7a(0x92)](_0x1fb63f),_0x1fb63f;}}function _0x517a(_0x479bae,_0x1c86b2){const _0x1bef86=_0x1bef();return _0x517a=function(_0x517a46,_0x27d928){_0x517a46=_0x517a46-0x6b;let _0x47ec35=_0x1bef86[_0x517a46];return _0x47ec35;},_0x517a(_0x479bae,_0x1c86b2);}module['exports']={'imageToWebp':imageToWebp,'videoToWebp':videoToWebp,'writeExifImg':writeExifImg,'writeExifVid':writeExifVid,'writeExif':writeExif};function _0x1bef(){const _0x10469c=['9955580OhWPii','node-webpmux','00:00:05','mimetype','exif','fluent-ffmpeg','27RmlUsR','author','webp','length','-an','writeFileSync','Image','libwebp','concat','stringify','548037Pfodtc','1406010BFCzRt','https://github.com/DikaArdnt/Hisoka-Morou','from','scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse','path','addOutputOptions','join','default','2820834IBAqEU','unlinkSync','-vsync','.webp','-preset','-vf','writeUIntLE','categories','packname','86588KlCSUM','utf-8','readUIntLE','-loop','48JmPsNI','toFormat','load','3080512yVGdeh','readFileSync','save','2RObWzf','data','8720454lzPPtb','00:00:00','randomBytes','end','crypto','-vcodec','toString','test'];_0x1bef=function(){return _0x10469c;};return _0x1bef();}